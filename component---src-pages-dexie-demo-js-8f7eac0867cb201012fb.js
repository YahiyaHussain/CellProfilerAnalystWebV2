(self.webpackChunkgatsby_test=self.webpackChunkgatsby_test||[]).push([[3288],{47663:function(e,t,n){"use strict";n.r(t);var a=n(92137),r=n(85061),o=n(87757),s=n.n(o),i=n(67294),c=n(96667),u=n(47798),l=(n(20458),n(85505)),d=n(10920),f=n(27136),g=n(51474),p=n(49995),m=n(13508),b=n(54657),v=n(77447),h=(n(88816),n(97849),n(9789)),k=(n(17710),n(67253),n(74243)),y=(n(74298),(0,d.Z)((function(){return{root:{display:"flex",alignItems:"center"},wrapper:{position:"relative"},buttonSuccess:{backgroundColor:g.Z[500],"&:hover":{backgroundColor:g.Z[700]}},fabProgress:{color:g.Z[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonProgress:{color:g.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})));t.default=function(){var e,t=i.useState(!1),n=(t[0],t[1]),o=i.useState(!1),d=(o[0],o[1]),g=i.useState(!1),E=(g[0],g[1]),W=i.useState(!1),Z=(W[0],W[1]),S=i.useState(!0),w=S[0],C=S[1],T=i.useState(!1),j=T[0],L=T[1],M=i.useState(!1),x=M[0],P=M[1],N=i.useState(!1),O=(N[0],N[1]),D=i.useState(null),z=(D[0],D[1]),I=i.useState(null),R=I[0],G=I[1],_=i.useState(null),A=_[0],U=_[1],X=i.useState(null),q=X[0],B=X[1],F=i.useState([[0,0],[0,0]]),H=(F[0],F[1]),J=i.useState(null),K=(J[0],J[1]),Q=i.useRef();i.useEffect((function(){var e=V("../dexieWorker.js","dexieWebWorker");B(e);var t=new MessageChannel,n=new MessageChannel,a=V("../dataWorker.js","dataWebWorker");a.postMessage({action:"connectToCanvasWorker"},[t.port1]),a.postMessage({action:"connectToClassifierWorker"},[n.port1]),G(a);var r=V("../canvasWorker.js","CanvasWebWorker");r.postMessage({action:"connectToDataWorker"},[t.port2]),z(r);var o=V("../classifierWorker.js","classifierWebWorker");o.postMessage({action:"connectToDataWorker"},[n.port2]),U(o)}),[]);var V=function(e,t){var n=new Worker(e);return n.addEventListener("error",(function(e){console.log("["+t+"] Error",e.message,e)})),n},Y=y(),$=(0,l.Z)(((e={})[Y.buttonSuccess]=x,e)),ee=function(e){O(!0);var t=null,n=function(e){if(t==e.data.uuid)switch(e.data.action){case"updateTrainingCanvases":k.show.history(Q.current,e.data.trainLogs,[].concat((0,r.Z)(e.data.ticks.loss),(0,r.Z)(e.data.ticks.accuracy)));break;default:console.log("didn't render bad action")}};te(A,"startTrainingGraphsConnection",{}).then((function(a){return t=a.data.uuid,A.addEventListener("message",n),te(A,"train",{trainingObject:e})})).then((function(){return te(A,"endTrainingGraphsConnection",{}),A.removeEventListener("message",n),te(A,"confusionMatrix")})).then((function(e){var t=e.data.confusionMatrix;H(t)})).then((function(){K(e),O(!1)}))},te=function(e,t,n){var a=(0,h.Z)();return new Promise((function(r){e.addEventListener("message",(function t(n){n.data.uuid===a&&(e.removeEventListener("message",t),r(n))})),e.postMessage(Object.assign({action:t},n,{uuid:a}))}))},ne=function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Upload!"),te(q,"init",{fileListObject:t.target.files}),L(!0),te(R,"init",{fileListObject:t.target.files}).then((function(){console.log("done"),te(R,"get",{getType:"cellPairData",getArgs:{cellPair:{ImageNumber:1,ObjectNumber:1}}})})).then((function(){return console.log("next"),te(R,"get",{getType:"trainingObject"})})).then((function(e){var t=e.data.getResult;return ee(t)})).then((function(){L(!1),P(!0),n(!0),d(!0),Z(!0),E(!0),C(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.createElement("div",{style:{overflowX:"hidden",height:"100%",width:"100%"}},i.createElement(c.Z,{style:{marginTop:"2%"}},i.createElement(u.Z,{style:{left:"40%",right:5}},i.createElement("div",{className:Y.root},i.createElement("div",{className:Y.wrapper},i.createElement(v.ZP,{title:"Load Data","aria-label":"load data"},i.createElement(p.Z,{"aria-label":"save",color:"primary",component:"label",className:$,style:{marginRight:5}},x?i.createElement(m.Z,null):i.createElement(b.Z,null),i.createElement("input",{type:"file",hidden:!0,webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",multiple:!0,onChange:function(e){ne(e)},disabled:!w}))),j&&i.createElement(f.Z,{className:Y.fabProgress,size:68}))))))}}}]);
//# sourceMappingURL=component---src-pages-dexie-demo-js-8f7eac0867cb201012fb.js.map